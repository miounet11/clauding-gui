# 版本 2.0.8 发布说明

发布日期：2025-08-05

## 性能优化

### ⚡ 优化会话历史加载性能

解决了 "Loading session history..." 加载缓慢的问题。

#### 主要改进：

1. **分页加载支持**
   - 避免一次性加载大量消息导致的界面卡顿
   - 当会话消息超过 1000 条时，自动只加载最新的 1000 条消息
   - 显示友好的提示信息，告知用户跳过了多少条较早的消息

2. **快速消息计数**
   - 新增独立的消息计数 API
   - 无需加载和解析全部 JSON 内容即可获取消息总数
   - 大幅提升对大型会话的响应速度

3. **文件读取优化**
   - 使用 8KB 缓冲区替代默认缓冲区
   - 优化行数统计算法，减少内存占用
   - 提升大文件（数百MB）的读取性能

## 技术细节

- 新增 `load_session_history_paginated` Tauri 命令
- 新增 `get_session_message_count` Tauri 命令
- 前端自动检测消息数量并选择合适的加载策略
- 保持向后兼容性，小型会话仍使用原有加载方式

## 使用体验

此版本显著改善了拥有大量历史消息的会话的加载速度。用户将不再遇到 "Loading session history..." 长时间等待的情况。